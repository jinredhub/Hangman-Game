<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Play Hangman Game</title>
        <link rel="stylesheet" type="text/css" href="assets/css/reset.css">
        <link rel="stylesheet" type="text/css" href="assets/css/style.css">
    </head>
    <body>
    	<div id = "html">
			<p>Press any key to get started!</p>
			<p>Wins</p>
			<p>Current Word</p>
			<p>computerWord</p>
			<p>Number of Guesses remainings</p>
			<p>guessRemaining</p>
			<p>Letters Already Guessed</p>
			<p>guessedWords</p>
		</div>

	<script>

		var user = {
			guessRemaining: 12,
			wins: 0,
			guessedWords: [],

			resetGame: function(){
				this.guessRemaining = 12;
				this.guessedWords = [];
				chooseRandomWordAssignToHiddenWord();
			},
		}

		var computerwords = ["mackerel", "flounder", "eel", "amberjack", "snapper"];
		var computerChoice = "mackerel";
		var hiddenWord = "________";

		function chooseRandomWordAssignToHiddenWord (){
			var x = Math.floor((Math.random() * computerwords.length) + 1) -1;
			computerChoice = computerwords[x];
			hiddenWord = computerChoice;
			for (i = 0; i < hiddenWord.length; i++){
				hiddenWord = hiddenWord.substr(0, i) + "_" + hiddenWord.substr(i + 1);
			}
		}

		function refreshScreen (){
			html = 
				"<p>Press any key to get started!</p>" + 
				"<p>Wins: " + user.wins + "</p>" + 
				"<p>Current Word</p>" + 
				"<p> <span>" + hiddenWord + "</span></p>" +
				"<p>Number of Guesses remainings</p>" +
				"<p>" + user.guessRemaining + "</p>" +
				"<p>Letters Already Guessed</p>" +
				"<p>" + user.guessedWords + "</p>";
					
				document.querySelector("#html").innerHTML = html;	
		}

		
		user.resetGame();
		refreshScreen();

		document.onkeyup = function(event){
			var userChoice = event.key;

			if (user.guessRemaining > 1){
				//find out if a letter exits in the computerChoice
				if (computerChoice.indexOf(userChoice) !== -1){
					for (i = 0; i < computerChoice.length; i++){
						if(userChoice === computerChoice.charAt(i)){
							hiddenWord = hiddenWord.substr(0, i) + userChoice + hiddenWord.substr(i + 1);
						}
					}
				}
				else {
					if (user.guessedWords.indexOf(userChoice) === -1){
						console.log("working");
						user.guessedWords.push(userChoice);
						user.guessRemaining --;
					}
				}

				if (hiddenWord === computerChoice){
					user.wins ++;
					user.resetGame();
				}
			}
			else{
				user.resetGame();
			}
			refreshScreen();
		};


	// user input a key (userGuess)
	// compair userGuess with every letters of computer word
	// if didn't match: push it to guessedWords and guessRemaing will -1
	// if matched: index of computerWord will be replaced by userGuess
	// if userGuess is same as one of guessedWords. Nothing will happen
	// If you guess all the words: win +1 then game will rest.

	</script>

    </body>
</html>
